#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

use function cli\line;
use function cli\prompt;

function isEven($number): bool
{
    return $number % 2 === 0;
}

function isCorrectAnswer($name, $answer, $correctAnswer = ''): bool
{
    if ($answer !== $correctAnswer) {
        line("'{$answer}' is wrong answer ;(. Correct answer was '{$correctAnswer}'.");
        line("Let's try again, %s!", $name);
        return false;
    }

    line("Correct!");
    return true;
}

$countRound = 3;

line('Welcome to the Brain Games!');
$name = prompt('May I have your name?');
line("Hello, %s!", $name);
line("Answer \"yes\" if the number is even, otherwise answer \"no\".");

for ($i = 0; $i < $countRound; $i++) {
    $randomNumber = rand(1, 100);
    line("Question: %s", $randomNumber);
    $answer = prompt('Your answer');
    $correctAnswer = isEven($randomNumber) ? 'yes' : 'no';
    if (!isCorrectAnswer($name, $answer, $correctAnswer)) {
        return;
    }
}

line("Congratulations, %s!", $name);

return;